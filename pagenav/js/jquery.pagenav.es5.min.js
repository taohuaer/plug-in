"use strict";(function(n){n.PageNavObject=function(t,i){this.$el=n(i);this._init(t)};n.PageNavObject.defaults={start:1,page:1,count:1,showpagenum:10,container:{lastpagenum:!1,jump:!1,lastpage:{enable:!1,text:"最后一页"}},onChange:function(){return!1}};n.PageNavObject.prototype={_init:function(t){var r=n.extend(!0,{},n.PageNavObject.defaults,t),i=this;i.$el.off("click",".pageNum");i.$el.off("click",".jump-btn");i.$el.on("click",".pageNum",function(){if(!n(this).is(".active")){var t=parseInt(n(this).data("page"),10);i._draw(t,r)}});i.$el.on("click",".jump-btn",function(){var t=n(this).prev("input"),u=t.val(),f;if(t)if(u){if(isNaN(u))return t.select(),!1;f=parseInt(u,10);i._draw(f,r)}else t.focus()});this._draw(r.start,r)},_draw:function(t,i){var r=i.count,w=t-1,b=t+1,o=(i.showpagenum>r?r:i.showpagenum)-1-(i.container.lastpagenum?1:0),u,it,v,s,y,rt,p,c;if(r==1){i.onChange(t);return this.$el.empty(),!1}if(t<=0||t>r)return this.$el.find(".jump").find("input").select(),!1;if(this.$el.empty(),r<=0)return!1;var f=n("<ul><\/ul>"),k,d,e=[],g,l,h,nt,tt=n('<li class="pageNum" data-page="1"><a>1<\/a><\/li>'),a=n('<li class="jump">跳转到 : <\/li>'),ut=n('<input type="text" />'),ft=n('<button class="jump-btn">GO<\/button>');if(this._insert(this.$el,f),t==1&&tt.addClass("active"),r>i.showpagenum&&(w>0&&(k=n('<li class="prev pageNum" data-page="'+w+'"><a><<\/a><\/li>')),b<=r&&(d=n('<li class="next pageNum" data-page="'+b+'"><a>><\/a><\/li>')),i.container.lastpage.enable&&t<r&&(nt=n('<li  class="last pageNum" data-page="'+r+'"><a>'+i.container.lastpage.text+"<\/a><\/li>"))),i.container.lastpagenum&&r>1&&(h=n('<li class="pageNum" data-page="'+r+'"><a>'+r+"<\/a><\/li>"),r==t&&h.addClass("active")),t+o>r){for(u=r-(i.container.lastpagenum?1:0);o>0;){if(u<=1)break;if(it=n('<li  class="pageNum" data-page="'+u+'"><a>'+u+"<\/a><\/li>"),t==u)break;e.unshift(it);u--;o--}for(u=t;o>0;){if(u<=1)break;v=n('<li  class="pageNum" data-page="'+u+'"><a>'+u+"<\/a><\/li>");t==u&&v.addClass("active");e.unshift(v);u--;o--}}else for(s=t==1?t+1:t;o>0;)y=n('<li  class="pageNum" data-page="'+s+'"><a>'+s+"<\/a><\/li>"),t==s&&y.addClass("active"),e.push(y),s++,o--;for(e.length>0&&(rt=e[0].data("page"),rt>2&&(g=n('<li class="spaces"><a>...<\/a><\/li>')),p=e[e.length-1].data("page"),h?p+1!=r&&(l=n('<li class="spaces"><a>...<\/a><\/li>')):p<r&&(l=n('<li class="spaces"><a>...<\/a><\/li>'))),this._insert(f,k),this._insert(f,tt),this._insert(f,g),c=0;c<e.length;c++)this._insert(f,e[c]);this._insert(f,l);this._insert(f,h);this._insert(f,d);this._insert(f,nt);i.container.jump&&r>i.showpagenum&&(a.append(ut),a.append(ft),this._insert(f,a));i.onChange(t)},_insert:function(n,t){t&&n.append(t)}};n.fn.pagenav=function(t){return this.each(function(){var i=n.data(this,"tabs");i||n.data(this,"tabs",new n.PageNavObject(t,this))}),this}})(jQuery);